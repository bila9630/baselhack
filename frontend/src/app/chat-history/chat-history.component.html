<div class="chat-container" id="chat">
    <div class="chat-messages">
        @for (msg of chatMessages$ | async; track msg.message) {
            <!-- Conditional rendering for chat bubbles -->
            @if (this.msg.author == "chaton") {
                <div class="d-flex w-100 justify-content-end align-items-start">
                    <div class="d-flex justify-content-end">
            <span
                    class="d-flex justify-content-center bubble chaton text-start"
            >
              <span>
                {{
                      msg.message | writing: msg.id == lastChatonMessageId | async
                  }}
                  <button
                          (click)="
                    explainQuestion.emit(' because it is needed')
                  "
                          class="small-icon-button"
                          mat-icon-button
                  >
                  <mat-icon>info</mat-icon>
                </button>
              </span>
            </span>
                    </div>
                    <div class="">

                        @if (msg.id == lastChatonMessageId) {
                            <app-chaton-bot/>
                        }
                        @for (bubble of bubbles$| async; track bubble) {
                            @if (bubble.referencePromptId === msg.id) {
                                <p>{{ bubble.question }}</p>
                            }
                        }
                    </div>
                </div>
            } @else {
                <p class="bubble client text-start">{{ msg.message }}</p>
            }
        }
    </div>
</div>
